<!DOCTYPE html>
<html>
<head>
    <title>{% block title %}{% endblock %} - Racing Analytics</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <h1>Racing Analytics</h1>
        <nav>
            <ul>
                <li><a href="{{ url_for('nascar') }}">NASCAR</a></li>
                <li><a href="{{ url_for('formula1') }}">Formula 1</a></li>
                <li><a href="{{ url_for('wec') }}">WEC</a></li>
            </ul>
        </nav>
    </header>
    <div class="container"> {# Add a container for the layout #}
        <aside class="side-panel">
            {% block side_panel %}
            {% endblock %}
        </aside>
        <main>
            {% if welcome_message %}
                <p>{{ welcome_message }}</p>
            {% endif %}
            {% block content %}
            {% endblock %}
        </main>
    </div>
    <footer>
        <p>&copy; 2024 Racing Analytics</p>
    </footer>
    <script>
        function setupMainTabs() {
            const mainTabs = document.querySelectorAll('.main-tab-link');
            const mainTabContent = document.querySelectorAll('.tab');

            mainTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.dataset.tab;

                    // Remove 'active' class from all main tabs and content
                    mainTabs.forEach(t => t.classList.remove('active'));
                    mainTabContent.forEach(tc => tc.classList.remove('active'));

                    // Activate the clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // Default to the first main tab (Race Results)
            if (mainTabs.length > 0) {
                mainTabs[0].click();
            }
        }

        function setupInnerTabs() {
            // Set up inner tabs (Race Results section tabs like Race Results, Race Details, etc.)
            document.querySelectorAll('.inner-tabs').forEach(tabContainer => {
                const tabs = tabContainer.querySelectorAll('.inner-tab-link');
                const tabContent = tabContainer.parentElement.querySelectorAll('.inner-tab');

                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        const tabId = tab.dataset.tab;

                        // Remove 'active' class from all inner tabs and content
                        tabs.forEach(t => t.classList.remove('active'));
                        tabContent.forEach(tc => tc.classList.remove('active'));

                        // Activate the clicked inner tab and corresponding content
                        tab.classList.add('active');
                        document.getElementById(tabId).classList.add('active');
                    });
                });

                // Default to the first inner tab
                if (tabs.length > 0) {
                    tabs[0].click();
                }
            });

            // Set up session tabs (Race, Qualifying, Stage 1, Stage 2) under Race Results
            document.querySelectorAll('.session-tabs').forEach(sessionTabContainer => {
                const sessionTabs = sessionTabContainer.querySelectorAll('.session-tab-link');
                const sessionTabContent = sessionTabContainer.parentElement.querySelectorAll('.session-tab');

                sessionTabs.forEach(sessionTab => {
                    sessionTab.addEventListener('click', () => {
                        const sessionTabId = sessionTab.dataset.tab;

                        // Remove 'active' class from all session tabs and content
                        sessionTabs.forEach(st => st.classList.remove('active'));
                        sessionTabContent.forEach(stc => stc.classList.remove('active'));

                        // Activate the clicked session tab and corresponding content
                        sessionTab.classList.add('active');
                        document.getElementById(sessionTabId).classList.add('active');
                    });
                });

                // Default to the first session tab
                if (sessionTabs.length > 0) {
                    sessionTabs[0].click();
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            setupMainTabs();  // Sets up Race Results and Analysis tabs
            setupInnerTabs();  // Sets up inner tabs (Race Results, Race Details, etc.) and session tabs
        });

    </script>
        
</body>
</html>
